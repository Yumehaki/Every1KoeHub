<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>{{ title or "Every1Koe Hub" }}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/static/site.css" />
  <script>
    // フォーム送信時の「アップロード中…」表示
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('form[data-busy]').forEach(f => {
        f.addEventListener('submit', (e) => {
          const btn = f.querySelector('button[type=submit]');
          if (btn) { btn.dataset.originalText = btn.textContent; btn.textContent = 'アップロード中…'; btn.disabled = true; }
        });
      });
    });
  </script>
</head>
<body>
<header class="site-header">
  <div class="wrap">
    <a href="/" class="logo">Every1Koe Hub</a>
    <nav>
      {% if user %}
        <a href="/models/upload">モデル投稿</a>
        <a href="/units/create">ユニット作成</a>
        <a href="/search">検索</a>
        <a href="/users/{{ user.uuid }}">マイページ</a>
        {% if user.is_admin %}<a href="/admin/announcements">お知らせ管理</a>{% endif %}
        <a href="/terms">利用規約</a>
        <a href="/logout" class="btn ghost">ログアウト</a>
      {% else %}
        <a href="/search">検索</a>
        <a href="/terms">利用規約</a>
        <a href="/register">登録</a>
        <a href="/login" class="btn ghost">ログイン</a>
      {% endif %}
    </nav>
  </div>
</header>

<main class="container">
  {% block content %}{% endblock %}
</main>

<footer class="site-footer">
  <div class="wrap">
    <small>© 2025 Every1Koe Hub</small>
  </div>
</footer>
</body>
</html>
